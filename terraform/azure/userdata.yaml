---

# cloud-config

users:
  - name: iac
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    groups: [docker]   
    shell: /bin/bash
    ssh_authorized_keys:
      - ${ssh_key}

package_update: true
packages:
  - wget
  - ntpdate
  - docker.io
  - docker-compose

write_files:
  - path: /tmp/hello.txt
    content: "Hello from Week 06!"
    owner: root:root
    permissions: '0644'

runcmd:
  - mkdir -p /home/iac
  - cp /tmp/hello.txt /home/iac/hello.txt
  - chown iac:iac /home/iac/hello.txt
  - systemctl enable docker
  - systemctl start docker
